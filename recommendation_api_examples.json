{
  "info": {
    "name": "个性化推荐API示例",
    "description": "包含身份验证和个性化推荐API的示例请求",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. 获取验证码",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{baseUrl}}/api/captcha/get",
          "host": ["{{baseUrl}}"],
          "path": ["api", "captcha", "get"]
        },
        "description": "获取图形验证码，返回验证码ID和图片"
      },
      "response": [
        {
          "name": "成功响应",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/captcha/get",
              "host": ["{{baseUrl}}"],
              "path": ["api", "captcha", "get"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"captcha_id\": \"abc123def456\",\n        \"captcha_image\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...\"\n    }\n}"
        }
      ]
    },
    {
      "name": "2. 验证验证码",
      "request": {
        "method": "POST",
        "url": {
          "raw": "{{baseUrl}}/api/captcha/verify",
          "host": ["{{baseUrl}}"],
          "path": ["api", "captcha", "verify"]
        },
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"captcha_id\": \"{{captcha_id}}\",\n    \"captcha_code\": \"{{captcha_code}}\"\n}"
        },
        "description": "验证用户输入的验证码是否正确"
      },
      "response": [
        {
          "name": "成功响应",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/captcha/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "captcha", "verify"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"code\": 0,\n    \"message\": \"验证成功\"\n}"
        },
        {
          "name": "验证码错误",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/captcha/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "captcha", "verify"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"error_code\": 10206,\n    \"error_message\": \"验证码不正确\"\n}"
        }
      ]
    },
    {
      "name": "3. 用户登录获取令牌",
      "request": {
        "method": "POST",
        "url": {
          "raw": "{{baseUrl}}/api/user/login",
          "host": ["{{baseUrl}}"],
          "path": ["api", "user", "login"]
        },
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"captcha_id\": \"{{captcha_id}}\",\n    \"captcha_code\": \"{{captcha_code}}\"\n}"
        },
        "description": "使用验证码登录并获取身份验证令牌"
      },
      "response": [
        {
          "name": "成功响应",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/user/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "user", "login"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"code\": 0,\n    \"message\": \"登录成功\",\n    \"data\": {\n        \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMTAwMSIsImV4cCI6MTYyNTEyMzQ1Nn0.abcdefghijklmnopqrstuvwxyz\",\n        \"expires_in\": 3600\n    }\n}"
        },
        {
          "name": "验证码错误",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/user/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "user", "login"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"error_code\": 10206,\n    \"error_message\": \"验证码不正确\"\n}"
        }
      ]
    },
    {
      "name": "4. 获取个性化推荐",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{baseUrl}}/api/house/recommend?user_id={{user_id}}&page=1&page_size=10",
          "host": ["{{baseUrl}}"],
          "path": ["api", "house", "recommend"],
          "query": [
            {
              "key": "user_id",
              "value": "{{user_id}}"
            },
            {
              "key": "page",
              "value": "1"
            },
            {
              "key": "page_size",
              "value": "10"
            },
            {
              "key": "city_id",
              "value": "110000",
              "disabled": true
            },
            {
              "key": "district_id",
              "value": "110105",
              "disabled": true
            },
            {
              "key": "price_range",
              "value": "3000-5000",
              "disabled": true
            },
            {
              "key": "house_type",
              "value": "2室1厅",
              "disabled": true
            }
          ]
        },
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "description": "获取个性化推荐房源列表，需要身份验证令牌"
      },
      "response": [
        {
          "name": "成功响应",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/house/recommend?user_id={{user_id}}&page=1&page_size=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "house", "recommend"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"total\": 100,\n        \"page\": 1,\n        \"page_size\": 10,\n        \"houses\": [\n            {\n                \"house_id\": 1001,\n                \"title\": \"精装修两室一厅\",\n                \"address\": \"朝阳区建国路88号\",\n                \"price\": 4500,\n                \"area\": 75.5,\n                \"house_type\": \"2室1厅\",\n                \"tags\": [\"精装修\", \"近地铁\", \"朝南\"],\n                \"images\": [\"http://example.com/image1.jpg\"],\n                \"score\": 0.95\n            },\n            {\n                \"house_id\": 1002,\n                \"title\": \"阳光充足三居室\",\n                \"address\": \"海淀区中关村南大街5号\",\n                \"price\": 6800,\n                \"area\": 110.0,\n                \"house_type\": \"3室2厅\",\n                \"tags\": [\"南北通透\", \"电梯房\", \"拎包入住\"],\n                \"images\": [\"http://example.com/image2.jpg\"],\n                \"score\": 0.92\n            }\n        ]\n    }\n}"
        },
        {
          "name": "验证失败",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/house/recommend?user_id={{user_id}}&page=1&page_size=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "house", "recommend"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"error_code\": 10206,\n    \"error_message\": \"验证码不正确\"\n}"
        },
        {
          "name": "令牌无效",
          "originalRequest": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/house/recommend?user_id={{user_id}}&page=1&page_size=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "house", "recommend"]
            }
          },
          "status": "Unauthorized",
          "code": 401,
          "body": "{\n    \"error_code\": 10401,\n    \"error_message\": \"身份验证失败\"\n}"
        }
      ]
    },
    {
      "name": "5. 刷新令牌",
      "request": {
        "method": "POST",
        "url": {
          "raw": "{{baseUrl}}/api/user/refresh_token",
          "host": ["{{baseUrl}}"],
          "path": ["api", "user", "refresh_token"]
        },
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"user_id\": \"{{user_id}}\"\n}"
        },
        "description": "刷新身份验证令牌"
      },
      "response": [
        {
          "name": "成功响应",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/user/refresh_token",
              "host": ["{{baseUrl}}"],
              "path": ["api", "user", "refresh_token"]
            }
          },
          "status": "OK",
          "code": 200,
          "body": "{\n    \"code\": 0,\n    \"message\": \"令牌刷新成功\",\n    \"data\": {\n        \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMTAwMSIsImV4cCI6MTYyNTEyMzQ1Nn0.abcdefghijklmnopqrstuvwxyz\",\n        \"expires_in\": 3600\n    }\n}"
        },
        {
          "name": "令牌无效",
          "originalRequest": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/user/refresh_token",
              "host": ["{{baseUrl}}"],
              "path": ["api", "user", "refresh_token"]
            }
          },
          "status": "Unauthorized",
          "code": 401,
          "body": "{\n    \"error_code\": 10401,\n    \"error_message\": \"身份验证失败\"\n}"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "1001",
      "type": "string"
    },
    {
      "key": "captcha_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "captcha_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ]
}